(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

$(document).ready(function () {
  if (!Array.from) {
    Array.from = function () {
      var toStr = Object.prototype.toString;

      var isCallable = function isCallable(fn) {
        return typeof fn === 'function' || toStr.call(fn) === '[object Function]';
      };

      var toInteger = function toInteger(value) {
        var number = Number(value);

        if (isNaN(number)) {
          return 0;
        }

        if (number === 0 || !isFinite(number)) {
          return number;
        }

        return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));
      };

      var maxSafeInteger = Math.pow(2, 53) - 1;

      var toLength = function toLength(value) {
        var len = toInteger(value);
        return Math.min(Math.max(len, 0), maxSafeInteger);
      };

      return function from(arrayLike
      /*, mapFn, thisArg */
      ) {
        var C = this;
        var items = Object(arrayLike);

        if (arrayLike == null) {
          throw new TypeError('Array.from requires an array-like object - not null or undefined');
        }

        var mapFn = arguments.length > 1 ? arguments[1] : void undefined;
        var T;

        if (typeof mapFn !== 'undefined') {
          if (!isCallable(mapFn)) {
            throw new TypeError('Array.from: when provided, the second argument must be a function');
          }

          if (arguments.length > 2) {
            T = arguments[2];
          }
        }

        var len = toLength(items.length);
        var A = isCallable(C) ? Object(new C(len)) : new Array(len);
        var k = 0;
        var kValue;

        while (k < len) {
          kValue = items[k];

          if (mapFn) {
            A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);
          } else {
            A[k] = kValue;
          }

          k += 1;
        }

        A.length = len;
        return A;
      };
    }();
  }

  if (navigator.userAgent.match(/Trident\/7\./) || navigator.userAgent.includes("Edge")) {
    $('body').on("mousewheel", function () {
      event.preventDefault();
      var wheelDelta = event.wheelDelta;
      var currentScrollPosition = window.pageYOffset;
      window.scrollTo(0, currentScrollPosition - wheelDelta);
    });
  }

  $('#falseinput').click(function () {
    $("#fileinput").click();
  });
  var uploadList = $(".upload-list");
  var closeBtn = $("<button type='button' class='close'><span class='icon-close'></span></button>");

  function removeItem(e) {
    $(e.target).closest('.upload-list-item').remove();
  }

  $('#file').change(function (e) {
    for (var i = 0; i <= $(e.target)[0].files.length - 1; i++) {
      var uploadListItem = $("<div class='upload-list-item'></div>");
      var itemId = +new Date();
      var closeBtn = $("<button type='button' class='close'><span class='icon-close'></span></button>");
      uploadListItem.text("File " + $(e.target)[0].files[i].name);
      uploadListItem.append(closeBtn);
      uploadListItem.attr('id', itemId);
      uploadList.append(uploadListItem);
      $('#' + itemId).find('.close').click(function (event) {
        var closestItem = $(event.target).closest('.upload-list-item');
        closestItem.hide(400, function () {
          closestItem.remove();
        });
      });
    }
  });

  function checkValue(target) {
    target.value ? $(target).next().addClass('invisible') : $(target).next().removeClass('invisible');
  }

  $('.fake-placeholder-input').on('blur', function (e) {
    checkValue(e.target);
  });
  jQuery(function () {
    initBgParallax();
  });

  function tabsSetHeight() {
    var tabs = $('.contacts-page .tab-pane'); // tabs.map(item => {
    //     $(tabs[item]).css('height', 'auto');
    // });

    var maxHeight = Array.from(tabs).reduce(function (a, b) {
      return $(b).innerHeight() > a ? $(b).innerHeight() : a;
    }, 0); // tabs.map(item => {
    //     $(tabs[item]).css('height', maxHeight + 'px');
    // });

    return maxHeight;
  } //  $('.nav-link').on('show.bs.tab', function (e) {
  //     let prevItem = $($(e.relatedTarget).attr('href'));
  //     const tabContent = $('.tab-content');
  //
  //     let currentItem = $($(e.target).attr('href'));
  //      const newHeight = currentItem.height();
  //      // tabContent.css('min-heigth', (prevItem.height() ) + 'px');
  //      tabContent.css('heigth', (prevItem.height() + 30) + 'px');
  //      tabContent.animate({height: newHeight + "px"}, {
  //          duration: 100
  //      });
  // });
  // comment


  function initBgParallax() {
    jQuery('.contact-us').parallaxBlock({
      image: '> img',
      fallbackClass: 'is-touch-device'
    });
  }
  /*
   * jQuery BG Parallax plugin
   */


  ;

  (function ($) {
    'use strict';

    var isTouchDevice = /MSIE 10.*Touch/.test(navigator.userAgent) || 'ontouchstart' in window || window.DocumentTouch && document instanceof DocumentTouch;

    var ParallaxController = function () {
      var $win = $(window);
      var items = [];
      var winProps = {
        width: 0,
        height: 0,
        scrollTop: 0
      };
      return {
        init: function init() {
          $win.on('load resize orientationchange', this.resizeHandler.bind(this));
          $win.on('scroll', this.scrollHandler.bind(this));
          this.resizeHandler();
        },
        resizeHandler: function resizeHandler() {
          winProps.width = $win.width();
          winProps.height = $win.height();
          $.each(items, this.calculateSize.bind(this));
        },
        scrollHandler: function scrollHandler() {
          winProps.scrollTop = $win.scrollTop();
          $.each(items, this.calculateScroll.bind(this));
        },
        calculateSize: function calculateSize(i) {
          var item = items[i];
          item.height = Math.max(item.$el.outerHeight(), winProps.height);
          item.width = item.$el.outerWidth();
          item.topOffset = item.$el.offset().top;
          var styles = this.getDimensions({
            imageRatio: item.imageRatio,
            itemWidth: item.width,
            itemHeight: item.height
          });
          item.$el.css({
            backgroundSize: Math.round(styles.width) + 'px ' + Math.round(styles.height) + 'px'
          });
          this.calculateScroll(i);
        },
        calculateScroll: function calculateScroll(i) {
          var item = items[i];

          if (winProps.scrollTop + winProps.height > item.topOffset && winProps.scrollTop < item.topOffset + item.height) {
            var ratio = (winProps.scrollTop + winProps.height - item.topOffset) / (winProps.height + item.height);
            item.$el.css({
              backgroundPosition: '50% ' + (winProps.height * (item.options.parallaxOffset / 100) - (winProps.height + item.height) * ratio * (item.options.parallaxOffset / 100)) + 'px'
            });
          }
        },
        getDimensions: function getDimensions(data) {
          var slideHeight = data.itemWidth / data.imageRatio;

          if (slideHeight < data.itemHeight) {
            slideHeight = data.itemHeight;
            data.itemWidth = slideHeight * data.imageRatio;
          }

          return {
            width: data.itemWidth,
            height: slideHeight,
            top: (data.itemHeight - slideHeight) / 2,
            left: (data.itemWidth - data.itemWidth) / 2
          };
        },
        getRatio: function getRatio(image) {
          if (image.prop('naturalWidth')) {
            return image.prop('naturalWidth') / image.prop('naturalHeight');
          } else {
            var img = new Image();
            img.src = image.prop('src');
            return img.width / img.height;
          }
        },
        imageLoaded: function imageLoaded(image, callback) {
          var self = this;

          var loadHandler = function loadHandler() {
            callback.call(self);
          };

          if (image.prop('complete')) {
            loadHandler();
          } else {
            image.one('load', loadHandler);
          }
        },
        add: function add(el, options) {
          var $el = $(el);
          var $image = $el.find(options.image);
          this.imageLoaded($image, function () {
            var imageRatio = this.getRatio($image);
            $el.css({
              backgroundImage: 'url(' + $image.attr('src') + ')',
              backgroundRepeat: 'no-repeat',
              backgroundAttachment: !isTouchDevice ? 'fixed' : 'scroll',
              backgroundSize: 'cover'
            });
            $image.remove();

            if (isTouchDevice) {
              $el.addClass(options.fallbackClass);
              return;
            }

            options.parallaxOffset = Math.abs(options.parallaxOffset);
            var newIndex = items.push({
              $el: $(el),
              options: options,
              imageRatio: imageRatio
            });
            this.calculateSize(newIndex - 1);
          });
        }
      };
    }();

    ParallaxController.init();

    $.fn.parallaxBlock = function (options) {
      options = $.extend({
        parallaxOffset: 0,
        // percent from 0 - top 100 (from window height)
        fallbackClass: 'is-touch-device',
        image: 'img'
      }, options);
      return this.each(function () {
        if (this.added) {
          return;
        }

        this.added = true;
        ParallaxController.add(this, options);
      });
    };
  })(jQuery);
});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJpbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsQ0FBQyxDQUFDLFFBQUQsQ0FBRCxDQUFZLEtBQVosQ0FBbUIsWUFBVztBQUMxQixNQUFJLENBQUMsS0FBSyxDQUFDLElBQVgsRUFBaUI7QUFDYixJQUFBLEtBQUssQ0FBQyxJQUFOLEdBQWMsWUFBVztBQUNyQixVQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsU0FBUCxDQUFpQixRQUE3Qjs7QUFDQSxVQUFJLFVBQVUsR0FBRyxTQUFiLFVBQWEsQ0FBUyxFQUFULEVBQWE7QUFDMUIsZUFBTyxPQUFPLEVBQVAsS0FBYyxVQUFkLElBQTRCLEtBQUssQ0FBQyxJQUFOLENBQVcsRUFBWCxNQUFtQixtQkFBdEQ7QUFDSCxPQUZEOztBQUdBLFVBQUksU0FBUyxHQUFHLFNBQVosU0FBWSxDQUFVLEtBQVYsRUFBaUI7QUFDN0IsWUFBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLEtBQUQsQ0FBbkI7O0FBQ0EsWUFBSSxLQUFLLENBQUMsTUFBRCxDQUFULEVBQW1CO0FBQUUsaUJBQU8sQ0FBUDtBQUFXOztBQUNoQyxZQUFJLE1BQU0sS0FBSyxDQUFYLElBQWdCLENBQUMsUUFBUSxDQUFDLE1BQUQsQ0FBN0IsRUFBdUM7QUFBRSxpQkFBTyxNQUFQO0FBQWdCOztBQUN6RCxlQUFPLENBQUMsTUFBTSxHQUFHLENBQVQsR0FBYSxDQUFiLEdBQWlCLENBQUMsQ0FBbkIsSUFBd0IsSUFBSSxDQUFDLEtBQUwsQ0FBVyxJQUFJLENBQUMsR0FBTCxDQUFTLE1BQVQsQ0FBWCxDQUEvQjtBQUNILE9BTEQ7O0FBTUEsVUFBSSxjQUFjLEdBQUcsSUFBSSxDQUFDLEdBQUwsQ0FBUyxDQUFULEVBQVksRUFBWixJQUFrQixDQUF2Qzs7QUFDQSxVQUFJLFFBQVEsR0FBRyxTQUFYLFFBQVcsQ0FBVSxLQUFWLEVBQWlCO0FBQzVCLFlBQUksR0FBRyxH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QkFGQTtBQUdmLFFBQUEsS0FBSyxFQUFFO0FBSFEsT0FBVCxFQUlQLE9BSk8sQ0FBVjtBQU1BLGFBQU8sS0FBSyxJQUFMLENBQVUsWUFBVztBQUN4QixZQUFJLEtBQUssS0FBVCxFQUFnQjtBQUNaO0FBQ0g7O0FBRUQsYUFBSyxLQUFMLEdBQWEsSUFBYjtBQUNBLFFBQUEsa0JBQWtCLENBQUMsR0FBbkIsQ0FBdUIsSUFBdkIsRUFBNkIsT0FBN0I7QUFDSCxPQVBNLENBQVA7QUFRSCxLQWZEO0FBZ0JILEdBN0pDLEVBNkpBLE1BN0pBLENBQUQ7QUFnS0osQ0EvVEQiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIkKGRvY3VtZW50KS5yZWFkeSggZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoIUFycmF5LmZyb20pIHtcclxuICAgICAgICBBcnJheS5mcm9tID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdG9TdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xyXG4gICAgICAgICAgICB2YXIgaXNDYWxsYWJsZSA9IGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nIHx8IHRvU3RyLmNhbGwoZm4pID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgdG9JbnRlZ2VyID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbnVtYmVyID0gTnVtYmVyKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGlmIChpc05hTihudW1iZXIpKSB7IHJldHVybiAwOyB9XHJcbiAgICAgICAgICAgICAgICBpZiAobnVtYmVyID09PSAwIHx8ICFpc0Zpbml0ZShudW1iZXIpKSB7IHJldHVybiBudW1iZXI7IH1cclxuICAgICAgICAgICAgICAgIHJldHVybiAobnVtYmVyID4gMCA/IDEgOiAtMSkgKiBNYXRoLmZsb29yKE1hdGguYWJzKG51bWJlcikpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgbWF4U2FmZUludGVnZXIgPSBNYXRoLnBvdygyLCA1MykgLSAxO1xyXG4gICAgICAgICAgICB2YXIgdG9MZW5ndGggPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsZW4gPSB0b0ludGVnZXIodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KGxlbiwgMCksIG1heFNhZmVJbnRlZ2VyKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBmcm9tKGFycmF5TGlrZS8qLCBtYXBGbiwgdGhpc0FyZyAqLykge1xyXG4gICAgICAgICAgICAgICAgdmFyIEMgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IE9iamVjdChhcnJheUxpa2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChhcnJheUxpa2UgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FycmF5LmZyb20gcmVxdWlyZXMgYW4gYXJyYXktbGlrZSBvYmplY3QgLSBub3QgbnVsbCBvciB1bmRlZmluZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbWFwRm4gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHZvaWQgdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgdmFyIFQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1hcEZuICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNDYWxsYWJsZShtYXBGbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJyYXkuZnJvbTogd2hlbiBwcm92aWRlZCwgdGhlIHNlY29uZCBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBUID0gYXJndW1lbnRzWzJdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbGVuID0gdG9MZW5ndGgoaXRlbXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIHZhciBBID0gaXNDYWxsYWJsZShDKSA/IE9iamVjdChuZXcgQyhsZW4pKSA6IG5ldyBBcnJheShsZW4pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGsgPSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIGtWYWx1ZTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChrIDwgbGVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAga1ZhbHVlID0gaXRlbXNba107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hcEZuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFba10gPSB0eXBlb2YgVCA9PT0gJ3VuZGVmaW5lZCcgPyBtYXBGbihrVmFsdWUsIGspIDogbWFwRm4uY2FsbChULCBrVmFsdWUsIGspO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFba10gPSBrVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGsgKz0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIEEubGVuZ3RoID0gbGVuO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEE7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBpZihuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9UcmlkZW50XFwvN1xcLi8pIHx8IG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoXCJFZGdlXCIpKSB7XHJcbiAgICAgICAgJCgnYm9keScpLm9uKFwibW91c2V3aGVlbFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHZhciB3aGVlbERlbHRhID0gZXZlbnQud2hlZWxEZWx0YTtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRTY3JvbGxQb3NpdGlvbiA9IHdpbmRvdy5wYWdlWU9mZnNldDtcclxuICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIGN1cnJlbnRTY3JvbGxQb3NpdGlvbiAtIHdoZWVsRGVsdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAkKCcjZmFsc2VpbnB1dCcpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJChcIiNmaWxlaW5wdXRcIikuY2xpY2soKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciB1cGxvYWRMaXN0ID0gJChcIi51cGxvYWQtbGlzdFwiKTtcclxuICAgIHZhciBjbG9zZUJ0biA9ICQoXCI8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J2Nsb3NlJz48c3BhbiBjbGFzcz0naWNvbi1jbG9zZSc+PC9zcGFuPjwvYnV0dG9uPlwiKVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlbW92ZUl0ZW0oZSkge1xyXG4gICAgICAgICQoZS50YXJnZXQpLmNsb3Nlc3QoJy51cGxvYWQtbGlzdC1pdGVtJykucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgJCgnI2ZpbGUnKS5jaGFuZ2UoZnVuY3Rpb24oZSkge1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSAkKGUudGFyZ2V0KVswXS5maWxlcy5sZW5ndGgtMTsgaSsrKXtcclxuICAgICAgICAgICAgdmFyIHVwbG9hZExpc3RJdGVtID0gJChcIjxkaXYgY2xhc3M9J3VwbG9hZC1saXN0LWl0ZW0nPjwvZGl2PlwiKTtcclxuICAgICAgICAgICAgY29uc3QgaXRlbUlkID0gKyBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICB2YXIgY2xvc2VCdG4gPSAkKFwiPGJ1dHRvbiB0eXBlPSdidXR0b24nIGNsYXNzPSdjbG9zZSc+PHNwYW4gY2xhc3M9J2ljb24tY2xvc2UnPjwvc3Bhbj48L2J1dHRvbj5cIik7XHJcbiAgICAgICAgICAgIHVwbG9hZExpc3RJdGVtLnRleHQoXCJGaWxlIFwiICsgJChlLnRhcmdldClbMF0uZmlsZXNbaV0ubmFtZSk7XHJcbiAgICAgICAgICAgIHVwbG9hZExpc3RJdGVtLmFwcGVuZChjbG9zZUJ0bik7XHJcbiAgICAgICAgICAgIHVwbG9hZExpc3RJdGVtLmF0dHIoJ2lkJywgaXRlbUlkKTtcclxuICAgICAgICAgICAgdXBsb2FkTGlzdC5hcHBlbmQodXBsb2FkTGlzdEl0ZW0pO1xyXG4gICAgICAgICAgICAkKCcjJyArIGl0ZW1JZCkuZmluZCgnLmNsb3NlJykuY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjbG9zZXN0SXRlbSA9ICQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KCcudXBsb2FkLWxpc3QtaXRlbScpO1xyXG4gICAgICAgICAgICAgICAgY2xvc2VzdEl0ZW0uaGlkZSg0MDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbG9zZXN0SXRlbS5yZW1vdmUoKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNoZWNrVmFsdWUodGFyZ2V0KXtcclxuICAgICAgICB0YXJnZXQudmFsdWUgP1xyXG4gICAgICAgICAgICAkKHRhcmdldCkubmV4dCgpLmFkZENsYXNzKCdpbnZpc2libGUnKSA6XHJcbiAgICAgICAgICAgICQodGFyZ2V0KS5uZXh0KCkucmVtb3ZlQ2xhc3MoJ2ludmlzaWJsZScpO1xyXG4gICAgfVxyXG5cclxuICAgICQoJy5mYWtlLXBsYWNlaG9sZGVyLWlucHV0Jykub24oJ2JsdXInLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGNoZWNrVmFsdWUoZS50YXJnZXQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgalF1ZXJ5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGluaXRCZ1BhcmFsbGF4KCk7XHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIHRhYnNTZXRIZWlnaHQoKSB7XHJcbiAgICAgICAgY29uc3QgdGFicyA9ICQoJy5jb250YWN0cy1wYWdlIC50YWItcGFuZScpO1xyXG4gICAgICAgIC8vIHRhYnMubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgIC8vICAgICAkKHRhYnNbaXRlbV0pLmNzcygnaGVpZ2h0JywgJ2F1dG8nKTtcclxuICAgICAgICAvLyB9KTtcclxuICAgICAgICBjb25zdCBtYXhIZWlnaHQgPSBBcnJheS5mcm9tKHRhYnMpLnJlZHVjZSgoYSxiKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAkKGIpLmlubmVySGVpZ2h0KCkgPiBhID8gJChiKS5pbm5lckhlaWdodCgpIDogYTtcclxuICAgICAgICB9LCAwKTtcclxuICAgICAgICAvLyB0YWJzLm1hcChpdGVtID0+IHtcclxuICAgICAgICAvLyAgICAgJCh0YWJzW2l0ZW1dKS5jc3MoJ2hlaWdodCcsIG1heEhlaWdodCArICdweCcpO1xyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgICAgIHJldHVybiBtYXhIZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gICQoJy5uYXYtbGluaycpLm9uKCdzaG93LmJzLnRhYicsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAvLyAgICAgbGV0IHByZXZJdGVtID0gJCgkKGUucmVsYXRlZFRhcmdldCkuYXR0cignaHJlZicpKTtcclxuICAgIC8vICAgICBjb25zdCB0YWJDb250ZW50ID0gJCgnLnRhYi1jb250ZW50Jyk7XHJcbiAgICAvL1xyXG4gICAgLy8gICAgIGxldCBjdXJyZW50SXRlbSA9ICQoJChlLnRhcmdldCkuYXR0cignaHJlZicpKTtcclxuICAgIC8vICAgICAgY29uc3QgbmV3SGVpZ2h0ID0gY3VycmVudEl0ZW0uaGVpZ2h0KCk7XHJcbiAgICAvLyAgICAgIC8vIHRhYkNvbnRlbnQuY3NzKCdtaW4taGVpZ3RoJywgKHByZXZJdGVtLmhlaWdodCgpICkgKyAncHgnKTtcclxuICAgIC8vICAgICAgdGFiQ29udGVudC5jc3MoJ2hlaWd0aCcsIChwcmV2SXRlbS5oZWlnaHQoKSArIDMwKSArICdweCcpO1xyXG4gICAgLy8gICAgICB0YWJDb250ZW50LmFuaW1hdGUoe2hlaWdodDogbmV3SGVpZ2h0ICsgXCJweFwifSwge1xyXG4gICAgLy8gICAgICAgICAgZHVyYXRpb246IDEwMFxyXG4gICAgLy8gICAgICB9KTtcclxuICAgIC8vIH0pO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4vLyBjb21tZW50XHJcbiAgICBmdW5jdGlvbiBpbml0QmdQYXJhbGxheCgpIHtcclxuICAgICAgICBqUXVlcnkoJy5jb250YWN0LXVzJykucGFyYWxsYXhCbG9jayh7XHJcbiAgICAgICAgICAgIGltYWdlOiAnPiBpbWcnLFxyXG4gICAgICAgICAgICBmYWxsYmFja0NsYXNzOiAnaXMtdG91Y2gtZGV2aWNlJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKlxyXG4gICAgICogalF1ZXJ5IEJHIFBhcmFsbGF4IHBsdWdpblxyXG4gICAgICovXHJcbiAgICA7KGZ1bmN0aW9uKCQpe1xyXG4gICAgICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICAgICAgdmFyIGlzVG91Y2hEZXZpY2UgPSAvTVNJRSAxMC4qVG91Y2gvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgfHwgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykgfHwgd2luZG93LkRvY3VtZW50VG91Y2ggJiYgZG9jdW1lbnQgaW5zdGFuY2VvZiBEb2N1bWVudFRvdWNoO1xyXG5cclxuICAgICAgICB2YXIgUGFyYWxsYXhDb250cm9sbGVyID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgJHdpbiA9ICQod2luZG93KTtcclxuICAgICAgICAgICAgdmFyIGl0ZW1zID0gW107XHJcbiAgICAgICAgICAgIHZhciB3aW5Qcm9wcyA9IHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAwLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAwLFxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAwXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHdpbi5vbignbG9hZCByZXNpemUgb3JpZW50YXRpb25jaGFuZ2UnLCB0aGlzLnJlc2l6ZUhhbmRsZXIuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHdpbi5vbignc2Nyb2xsJywgdGhpcy5zY3JvbGxIYW5kbGVyLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgcmVzaXplSGFuZGxlcjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luUHJvcHMud2lkdGggPSAkd2luLndpZHRoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luUHJvcHMuaGVpZ2h0ID0gJHdpbi5oZWlnaHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGl0ZW1zLCB0aGlzLmNhbGN1bGF0ZVNpemUuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIHNjcm9sbEhhbmRsZXI6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpblByb3BzLnNjcm9sbFRvcCA9ICR3aW4uc2Nyb2xsVG9wKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChpdGVtcywgdGhpcy5jYWxjdWxhdGVTY3JvbGwuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIGNhbGN1bGF0ZVNpemU6IGZ1bmN0aW9uKGkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGl0ZW1zW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmhlaWdodCA9IE1hdGgubWF4KGl0ZW0uJGVsLm91dGVySGVpZ2h0KCksIHdpblByb3BzLmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS53aWR0aCA9IGl0ZW0uJGVsLm91dGVyV2lkdGgoKTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnRvcE9mZnNldCA9IGl0ZW0uJGVsLm9mZnNldCgpLnRvcDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0eWxlcyA9IHRoaXMuZ2V0RGltZW5zaW9ucyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlUmF0aW86IGl0ZW0uaW1hZ2VSYXRpbyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVdpZHRoOiBpdGVtLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtSGVpZ2h0OiBpdGVtLmhlaWdodFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpdGVtLiRlbC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kU2l6ZTogTWF0aC5yb3VuZChzdHlsZXMud2lkdGgpICsgJ3B4ICcgKyBNYXRoLnJvdW5kKHN0eWxlcy5oZWlnaHQpICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVNjcm9sbChpKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgY2FsY3VsYXRlU2Nyb2xsOiBmdW5jdGlvbihpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVtc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpblByb3BzLnNjcm9sbFRvcCArIHdpblByb3BzLmhlaWdodCA+IGl0ZW0udG9wT2Zmc2V0ICYmIHdpblByb3BzLnNjcm9sbFRvcCA8IGl0ZW0udG9wT2Zmc2V0ICsgaXRlbS5oZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhdGlvID0gKHdpblByb3BzLnNjcm9sbFRvcCArIHdpblByb3BzLmhlaWdodCAtIGl0ZW0udG9wT2Zmc2V0KSAvICh3aW5Qcm9wcy5oZWlnaHQgKyBpdGVtLmhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLiRlbC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOiAnNTAlICcgKyAod2luUHJvcHMuaGVpZ2h0ICogKGl0ZW0ub3B0aW9ucy5wYXJhbGxheE9mZnNldCAvIDEwMCkgLSAod2luUHJvcHMuaGVpZ2h0ICsgaXRlbS5oZWlnaHQpICogcmF0aW8gKiAoaXRlbS5vcHRpb25zLnBhcmFsbGF4T2Zmc2V0IC8gMTAwKSkgKyAncHgnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgZ2V0RGltZW5zaW9uczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzbGlkZUhlaWdodCA9IGRhdGEuaXRlbVdpZHRoIC8gZGF0YS5pbWFnZVJhdGlvO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2xpZGVIZWlnaHQgPCBkYXRhLml0ZW1IZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVIZWlnaHQgPSBkYXRhLml0ZW1IZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuaXRlbVdpZHRoID0gc2xpZGVIZWlnaHQgKiBkYXRhLmltYWdlUmF0aW87XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBkYXRhLml0ZW1XaWR0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBzbGlkZUhlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAoZGF0YS5pdGVtSGVpZ2h0IC0gc2xpZGVIZWlnaHQpIC8gMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogKGRhdGEuaXRlbVdpZHRoIC0gZGF0YS5pdGVtV2lkdGgpIC8gMlxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIGdldFJhdGlvOiBmdW5jdGlvbihpbWFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZS5wcm9wKCduYXR1cmFsV2lkdGgnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW1hZ2UucHJvcCgnbmF0dXJhbFdpZHRoJykgLyBpbWFnZS5wcm9wKCduYXR1cmFsSGVpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gaW1hZ2UucHJvcCgnc3JjJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbWcud2lkdGggLyBpbWcuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgaW1hZ2VMb2FkZWQ6IGZ1bmN0aW9uKGltYWdlLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbG9hZEhhbmRsZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChzZWxmKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZS5wcm9wKCdjb21wbGV0ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2Uub25lKCdsb2FkJywgbG9hZEhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgYWRkOiBmdW5jdGlvbihlbCwgb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciAkZWwgPSAkKGVsKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgJGltYWdlID0gJGVsLmZpbmQob3B0aW9ucy5pbWFnZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VMb2FkZWQoJGltYWdlLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlUmF0aW8gPSB0aGlzLmdldFJhdGlvKCRpbWFnZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkZWwuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZTogJ3VybCgnICsgJGltYWdlLmF0dHIoJ3NyYycpICsgJyknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZFJlcGVhdDogJ25vLXJlcGVhdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQXR0YWNobWVudDogIWlzVG91Y2hEZXZpY2UgPyAnZml4ZWQnIDogJ3Njcm9sbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kU2l6ZTogJ2NvdmVyJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbWFnZS5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1RvdWNoRGV2aWNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWwuYWRkQ2xhc3Mob3B0aW9ucy5mYWxsYmFja0NsYXNzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wYXJhbGxheE9mZnNldCA9IE1hdGguYWJzKG9wdGlvbnMucGFyYWxsYXhPZmZzZXQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0luZGV4ID0gaXRlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWw6ICQoZWwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogb3B0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlUmF0aW86IGltYWdlUmF0aW9cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVNpemUobmV3SW5kZXggLSAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KCkpO1xyXG5cclxuICAgICAgICBQYXJhbGxheENvbnRyb2xsZXIuaW5pdCgpO1xyXG5cclxuICAgICAgICAkLmZuLnBhcmFsbGF4QmxvY2sgPSBmdW5jdGlvbihvcHRpb25zKXtcclxuICAgICAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKHtcclxuICAgICAgICAgICAgICAgIHBhcmFsbGF4T2Zmc2V0OiAwLCAvLyBwZXJjZW50IGZyb20gMCAtIHRvcCAxMDAgKGZyb20gd2luZG93IGhlaWdodClcclxuICAgICAgICAgICAgICAgIGZhbGxiYWNrQ2xhc3M6ICdpcy10b3VjaC1kZXZpY2UnLFxyXG4gICAgICAgICAgICAgICAgaW1hZ2U6ICdpbWcnXHJcbiAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFkZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgUGFyYWxsYXhDb250cm9sbGVyLmFkZCh0aGlzLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgIH0oalF1ZXJ5KSk7XHJcblxyXG5cclxufSk7Il19
